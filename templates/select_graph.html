<!-- templates/select_graph.html -->

{% extends "base.html" %}

{% block content %}
<h1 class="mt-5">Seleccionar Opciones de Gráfico</h1>
<form method="POST">
    <div class="form-group">
        <label for="template">Seleccionar Plantilla de Gráfico:</label>
        <!-- Opciones predefinidas -->
        <select name="template" id="template" class="form-control">
            <option value="mean_cleanliness">Promedio de Limpieza en el Tiempo</option>
            <option value="cleaning_by_zone">Limpieza por Zona</option>
            <option value="cleaning_by_zone_and_room_type">Limpieza por Zona y Tipo de Sala</option>
            <option value="cleaning_by_elements_per_quarter">Limpieza por Elementos por Trimestre</option>
            <option value="cleaning_by_hospital_unit_and_zone">Limpieza por zona en Unidad Hospitalaria Y zona</option>
            <option value="cleaning_by_hospital_unit">Limpieza por zona en Unidad Hospitalaria</option>
        </select>
    </div>



    <!-- Agregación de Tiempo -->
    <div class="form-group">
        <label for="time_aggregation">Agregación Temporal:</label>
        <select name="time_aggregation" id="time_aggregation" class="form-control">
            <option value="monthly">Mensual</option>
            <option value="quarterly">Trimestral</option>
        </select>
    </div>

    <!-- Tipo de Gráfico -->
    <div class="form-group">
        <label for="graph_type">Tipo de Gráfico:</label>
        <select name="graph_type" id="graph_type" class="form-control">
            <option value="Line Chart">Gráfico de Líneas</option>
            <option value="Bar Chart">Gráfico de Barras</option>
        </select>
    </div>

    <!-- Mostrar Números -->
    <div class="form-group form-check">
        <input type="checkbox" class="form-check-input" id="show_numbers" name="show_numbers">
        <label class="form-check-label" for="show_numbers">Mostrar Números en el Gráfico</label>
    </div>

    <button type="submit" class="btn btn-primary">Generar Gráfico</button>
</form>

    <!-- Overview Section -->
    <div class="graph-container">
        <h2>Resumen de los Datos</h2>
        <div>
            {{ overview_html | safe }}
        </div>
    </div>
{% endblock %}

<style>
  .graph-container {
    width: 100%;
    max-width: 1200px; /* Adjust max width if needed */
    margin: 0 auto;
    padding: 20px;
    overflow-x: auto;  /* Allows horizontal scrolling if needed */
  }

  /* Optional: To ensure container adjusts to larger graphs */
  iframe {
    width: 100% !important;
    height: 600px !important;  /* Increase height if graphs are being cut off */
  }
</style>